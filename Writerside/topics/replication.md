# Распределенная система

Раздел включает проектирование распределённой системы на основе встраиваемого ядра хранилища,
включая реализацию RAFT для репликации и шардирование для масштабирования.

• **Репликация**: Обеспечить отказоустойчивость и высокую доступность за счёт репликации данных между несколькими узлами с помощью алгоритма консенсуса RAFT.

• **Шардирование**: Распределить данные по шардам (logical partitions)

## Компоненты распределенной системы

### Ядро хранилища (LSMStorage)

<a href="storage.md">Подробное описание ядра хранилища здесь</a>

### RAFT-репликация

Репликация
 : Каждый узел в группе RAFT содержит локальную копию LSMStorage.  
 : Группа RAFT обеспечивает согласованное состояние системы через выбор лидера, репликацию логов и периодические heartbeat-сообщения.

### Шардирование

Шардирование
 : Данные распределяются по логическим шардам. Каждый шард может поддерживаться отдельной группой узлов (каждая группа использует RAFT для репликации).
 : Метаданные, описывающие назначение шарда (например, диапазон ключей или позиция в кольце консистентного хеширования), могут храниться в специальном сервисе или распределённом реестре (например, используя ZooKeeper / etcd / Apache Zookeeper, либо собственное решение).

### Клиентский API и Proxy

Клиентский API и Proxy
 : Слой, принимающий внешние запросы (например, через REST API или gRPC) и направляющий их в соответствующую RAFT-группу/шард.
 : Может включать логическую маршрутизацию запросов (routing requests):  
 : Клиент обращается к входной точке, которая определяет нужный шард по ключу (через consistent hashing).  
 : Запрос направляется к лидеру RAFT группы этого шарда.

### Сервис администрирования и мониторинга

Сервис администрирования и мониторинга
 : Веб-интерфейс или консоль для визуализации.



<code-block lang="plantuml">

</code-block>





## ЯП и технологии

Коммуникационный слой

Для обмена сообщениями между узлами, а также для приема клиентских запросов, можно использовать:

- gRPC:
- Современный стандарт для межсервисного общения.
- Позволяет задокументировать API с помощью Protocol Buffers, что упрощает сериализацию и версионирование.




